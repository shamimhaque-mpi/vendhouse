!function(n){var a={url:null,autoload:!0,data:{page:1,size:10},before:function(){n(this.loading).fadeIn()},after:function(a){n(this.loading).fadeOut(),n(a).fadeInWithDelay()},scroller:n(window),heightOffset:20,loading:"#loading",loadingText:"Wait a moment... it's loading!",loadingNomoreText:"No more.",manuallyText:"click to loading more."};n.fn.scrollPagination=function(t){var o=n.extend(a,t);o.scroller;return this.each(function(){n.fn.scrollPagination.init(n(this),o)})},n.fn.stopScrollPagination=function(a=null,t=null){if(null==a)return this.each(function(){n(this).attr("scrollPagination","disabled")});n(t.loading).text(t.loadingNomoreText).fadeIn(),n(a).attr("scrollPagination","disabled")},n.fn.scrollPagination.loadContent=function(a,t){t.scroller;null!=t.before&&t.before(),n(a).children().attr("rel","loaded"),n.ajax({type:"POST",url:t.url,data:t.data,dataType:"json",success:function(o){var l="";null!=o.content&&(n(t.loading).text(t.loadingText),n.each(o.content,function(n,a){l+="<li style='opacity:0;-moz-opacity: 0;filter: alpha(opacity=0);'><p>"+a+"</p></li>",dataCount=parseInt(n)+1}),n(a).append(l),dataCount<t.data.size?t.data.page++:n.fn.stopScrollPagination(a,t));var i=n(a).children("[rel!=loaded]");null!=t.after&&t.after(i)}})},n.fn.scrollPagination.init=function(a,t){var o=t.scroller;n(a).attr("scrollPagination","enabled"),0===n(a).children().length&&n.fn.scrollPagination.loadContent(a,t),!0===t.autoload?n(o).scroll(function(l){"enabled"==n(a).attr("scrollPagination")?Math.ceil(n(o).scrollTop())+t.heightOffset>=n(document).height()-n(o).height()&&n.fn.scrollPagination.loadContent(a,t):l.stopPropagation(a,t)}):(t.loadingText=t.manuallyText,n(t.loading).text(t.loadingText).fadeIn().on("click",function(o){"enabled"==n(a).attr("scrollPagination")?n.fn.scrollPagination.loadContent(a,t):o.stopPropagation(a,t)}))},n.fn.fadeInWithDelay=function(){var a=0;return this.each(function(){n(this).delay(a).animate({opacity:1},200),a+=100})}}(jQuery);